[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/app/logs/

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stderr_logfile=/app/logs/nginx_err.log
stdout_logfile=/app/logs/nginx_out.log
user=root

[program:auth-server]
command=node /app/auth/server.js
directory=/app/auth
autostart=true
autorestart=true
stderr_logfile=/app/logs/auth_err.log
stdout_logfile=/app/logs/auth_out.log
user=terminal
environment=NODE_ENV=production,AUTH_PORT=3000

[program:ttyd]
command=/app/scripts/start-ttyd.sh
autostart=true
autorestart=true
stderr_logfile=/app/logs/ttyd_err.log
stdout_logfile=/app/logs/ttyd_out.log
user=terminal

[group:ttydx]
programs=nginx,auth-server,ttyd
priority=999